"use strict";var PhoneFormatter=function(formatter,delimiter){var owner=this;owner.delimiter=delimiter||delimiter===""?delimiter:" ";owner.delimiterRE=delimiter?new RegExp("\\"+delimiter,"g"):"";owner.formatter=formatter};PhoneFormatter.prototype={setFormatter:function(formatter){this.formatter=formatter},format:function(phoneNumber){var owner=this;owner.formatter.clear();phoneNumber=phoneNumber.replace(/[^\d+]/g,"");phoneNumber=phoneNumber.replace(/^\+/,"B").replace(/\+/g,"").replace("B","+");phoneNumber=phoneNumber.replace(owner.delimiterRE,"");var result="",current,validated=false;for(var i=0,iMax=phoneNumber.length;i<iMax;i++){current=owner.formatter.inputDigit(phoneNumber.charAt(i));if(/[\s()-]/g.test(current)){result=current;validated=true}else{if(!validated){result=current}}}result=result.replace(/[()]/g,"");result=result.replace(/[\s-]/g,owner.delimiter);return result}};module.exports=PhoneFormatter;