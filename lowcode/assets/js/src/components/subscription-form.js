const subscriptionForm=(()=>{const form=document.querySelectorAll(".subscription-form");if(form===null)return;for(let i=0;i<form.length;i++){let button=form[i].querySelector('button[type="submit"]'),buttonText=button.innerHTML,input=form[i].querySelector(".form-control"),antispam=form[i].querySelector(".subscription-form-antispam"),status=form[i].querySelector(".subscription-status");form[i].addEventListener("submit",(function(e){if(e)e.preventDefault();if(antispam.value!=="")return;register(this,button,input,buttonText,status)}))}let register=(form,button,input,buttonText,status)=>{button.innerHTML="Sending...";let url=form.action.replace("/post?","/post-json?");let data="&"+input.name+"="+encodeURIComponent(input.value);let script=document.createElement("script");script.src=url+"&c=callback"+data;document.body.appendChild(script);let callback="callback";window[callback]=response=>{delete window[callback];document.body.removeChild(script);button.innerHTML=buttonText;if(response.result=="success"){input.classList.remove("is-invalid");input.classList.add("is-valid");status.classList.remove("status-error");status.classList.add("status-success");status.innerHTML=response.msg;setTimeout((()=>{input.classList.remove("is-valid");status.innerHTML="";status.classList.remove("status-success")}),6e3)}else{input.classList.remove("is-valid");input.classList.add("is-invalid");status.classList.remove("status-success");status.classList.add("status-error");status.innerHTML=response.msg.substring(4);setTimeout((()=>{input.classList.remove("is-invalid");status.innerHTML="";status.classList.remove("status-error")}),6e3)}}}})();export default subscriptionForm;