import {GVC} from '../glitterBundle/GVController.js';
import {BgWidget} from '../backend-manager/bg-widget.js';
import {OptionsItem} from '../backend-manager/bg-product.js';
import {ApiShop} from '../glitter-base/route/shopping.js';
import {EditorElem} from '../glitterBundle/plugins/editor-elem.js';
import {ShareDialog} from '../glitterBundle/dialog/ShareDialog.js';
import {FilterOptions} from './filter-options.js';

interface VoucherData {
    id: number;
    title: string;
    method: 'percent' | 'fixed';
    reBackType: 'rebate' | 'discount' | 'shipment_free';
    trigger: 'auto' | 'code';
    value: number;
    for: 'collection' | 'product' | 'all';
    rule: 'min_price' | 'min_count';
    forKey: string[];
    ruleValue: number;
    startDate: string;
    startTime: string;
    endDate?: string;
    endTime?: string;
    status: 0 | 1 | -1;
    type: 'voucher';
    code?: string;
    overlay: boolean;
    bind?: {
        id: string;
        spec: string[];
        count: number;
        sale_price: number;
        collection: string[];
        discount_price: number;
        rebate: number;
        shipment_fee: number;
    }[];
    start_ISO_Date: string;
    end_ISO_Date: string;
    discount_total: number;
    rebate_total: number;
    target: string;
    targetList: string[];
}

class OrderDetail {
    subtotal: number;
    shipment: number;
    discount: number;
    rebate: number;
    cart_token: string;
    voucher: VoucherData;
    lineItems: {
        id: number;
        title: string;
        preview_image: string;
        spec: string[];
        count: number;
        sale_price: number;
        sku: string
    }[];
    customer_info: {
        payment_select: string;
        name: string;
        email: string;
        phone: string;
    };
    pos_info?:any;
    user_info: {
        name: string;
        email: string;
        phone: string;
        address: string;
        shipment: 'normal' | 'FAMIC2C' | 'UNIMARTC2C' | 'HILIFEC2C' | 'OKMARTC2C';
        CVSStoreName: string;
        CVSStoreID: string;
        CVSTelephone: string;
        MerchantTradeNo: string;
        CVSAddress: string;
        note: string;
    };
    pay_status: any;

    constructor(subtotal: number, shipment: number) {
        this.subtotal = subtotal;
        this.discount = 0;
        this.rebate = 0;
        this.shipment = shipment;
        this.cart_token = "";
        this.lineItems = [];
        this.voucher = newVoucher;
        this.user_info = {
            CVSAddress: "",
            CVSStoreID: "",
            CVSStoreName: "",
            CVSTelephone: "",
            MerchantTradeNo: "",
            address: "",
            email: "",
            name: "",
            note: "",
            phone: "",
            shipment: 'normal',
        };
        this.customer_info = {
            payment_select:"POS",
            name: "",
            phone: "",
            email: ""
        };
        this.pay_status = 1
    }

    get total(): number {
        return this.subtotal + this.shipment - this.discount;
    }
}

let newVoucher: VoucherData;

type ViewModel = {
    id: string;
    filterID: string;
    type: string;
    query: string;
    order: any;
    productSearch: any[];
    searchable: boolean;
    categorySearch: boolean;
    categories: any[];
    paySelect: string;
};


type Product = {
    id: number;
    content: {
        collection: string[];
    };
};

function getConfig() {
    const saasConfig: { config: any; api: any } = (window.parent as any).saasConfig;
    return saasConfig;
}

export class POSSetting {
    public static main(gvc: GVC) {
        getConfig().config.appName = 'shop-template-clothing-v3';
        (window as any).appName = 'shop-template-clothing-v3';
        const glitter = gvc.glitter;
        const vm: ViewModel = {
            id: glitter.getUUID(),
            filterID: glitter.getUUID(),
            type: 'menu',
            order: {},
            query: '',
            productSearch: [],
            searchable: true,
            categorySearch: true,
            categories: [{
                key: "all",
                value: "全部商品",
                select: true
            }],
            paySelect: "cash"
        };
        const html = String.raw;
        const dialog = new ShareDialog(gvc.glitter);
        let orderDetail = new OrderDetail(0, 0);
        let realTotal = 0;
        return gvc.bindView(() => {
            return {
                bind: vm.id,
                dataList: [{obj: vm, key: 'type'}],
                view: () => {
                    gvc.addStyle(`
                        .product-show{
                        -ms-overflow-style: none;
                        scrollbar-width: none;
                        
                        }
                        .product-show::-webkit-scrollbar {
                            display: none;  /* Chrome, Safari, Opera */
                        }
                    `)
                    return html`
                        <div class="d-flex nav-top"
                             style="z-index:2;height: 86px;width: 100%;background: #FFF;box-shadow: 0 1px 10px 0 rgba(0, 0, 0, 0.10);padding-top: 6px;position: fixed;left: 0;top: 0;">
                            <div class="POS-logo h-100 d-flex align-items-center justify-content-center"
                                 style="padding-left: 24px;gap: 32px;">
                                <svg width="157" height="28" viewBox="0 0 157 28" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1.812 17.972C2.28067 18.342 3.08233 18.8477 4.217 19.489C5.37633 20.1303 6.474 20.451 7.51 20.451C8.57067 20.451 9.101 20.044 9.101 19.23C9.101 18.86 8.953 18.5393 8.657 18.268C8.361 17.972 7.81833 17.639 7.029 17.269C6.23967 16.899 5.64767 16.6153 5.253 16.418C4.85833 16.196 4.328 15.8507 3.662 15.382C3.02067 14.8887 2.52733 14.383 2.182 13.865C1.19533 12.459 0.702 10.6707 0.702 8.5C0.702 6.32933 1.50367 4.504 3.107 3.024C4.735 1.51933 6.85633 0.766998 9.471 0.766998C11.247 0.766998 12.8873 0.964332 14.392 1.359C15.8967 1.729 16.6737 2.22233 16.723 2.839C16.723 2.913 16.723 2.987 16.723 3.061C16.723 3.92433 16.4517 5.022 15.909 6.354C15.3663 7.66133 14.984 8.389 14.762 8.537C13.1833 7.723 11.765 7.316 10.507 7.316C9.27367 7.316 8.657 7.76 8.657 8.648C8.657 9.19067 9.11333 9.67167 10.026 10.091C10.2233 10.1897 10.507 10.3253 10.877 10.498C11.247 10.6707 11.6663 10.8803 12.135 11.127C12.6283 11.349 13.1463 11.645 13.689 12.015C14.2563 12.3603 14.8607 12.829 15.502 13.421C16.8093 14.6543 17.463 16.2823 17.463 18.305C17.463 20.9443 16.7353 23.1027 15.28 24.78C13.8247 26.4573 11.58 27.3207 8.546 27.37C7.066 27.37 5.72167 27.2467 4.513 27C3.329 26.7533 2.293 26.2723 1.405 25.557C0.517 24.8417 0.073 23.9783 0.073 22.967C0.073 21.9557 0.258 20.9567 0.628 19.97C0.998 18.9587 1.39267 18.2927 1.812 17.972ZM40.6343 26.371C40.6343 26.7903 39.3886 27 36.8973 27C34.4059 27 33.1603 26.7903 33.1603 26.371V17.861H27.9803V26.371C27.9803 26.7903 26.7346 27 24.2433 27C21.7519 27 20.5063 26.7903 20.5063 26.371V1.84C20.5063 1.322 21.7519 1.063 24.2433 1.063C26.7346 1.063 27.9803 1.322 27.9803 1.84V10.535H33.1603V1.914C33.1603 1.56867 33.7769 1.322 35.0103 1.174C35.6516 1.12467 36.2806 1.1 36.8973 1.1L38.7843 1.174C40.0176 1.322 40.6343 1.56867 40.6343 1.914V26.371ZM55.3068 27.37C51.8534 27.37 49.0291 26.2353 46.8338 23.966C44.6631 21.6967 43.5778 18.3913 43.5778 14.05C43.5778 9.684 44.6754 6.37867 46.8708 4.134C49.0908 1.88933 51.9398 0.766998 55.4178 0.766998C58.9204 0.766998 61.7448 1.877 63.8908 4.097C66.0368 6.29233 67.1098 9.63467 67.1098 14.124C67.1098 18.5887 66.0121 21.9187 63.8168 24.114C61.6214 26.2847 58.7848 27.37 55.3068 27.37ZM55.3438 7.871C54.1598 7.871 53.1608 8.41367 52.3468 9.499C51.5574 10.5843 51.1628 12.1137 51.1628 14.087C51.1628 16.0357 51.5451 17.5403 52.3098 18.601C53.0744 19.637 54.0734 20.155 55.3068 20.155C56.5648 20.155 57.5761 19.6247 58.3408 18.564C59.1301 17.5033 59.5248 15.9863 59.5248 14.013C59.5248 12.0397 59.1178 10.5227 58.3038 9.462C57.5144 8.40133 56.5278 7.871 55.3438 7.871ZM73.2995 27.074C71.0548 27.074 69.9325 26.8273 69.9325 26.334V2.358C69.9325 1.51933 70.3148 1.1 71.0795 1.1H77.5915C81.2421 1.1 83.8691 1.85233 85.4725 3.357C87.1005 4.86167 87.9145 7.04467 87.9145 9.906C87.9145 12.274 87.1498 14.4447 85.6205 16.418C84.8558 17.4047 83.7335 18.194 82.2535 18.786C80.7735 19.378 79.0468 19.674 77.0735 19.674V26.297C77.0735 26.593 76.6048 26.8027 75.6675 26.926C74.7548 27.0247 73.9655 27.074 73.2995 27.074ZM77.0735 7.538V13.384H77.5545C78.4178 13.384 79.1455 13.1127 79.7375 12.57C80.3295 12.0273 80.6255 11.2627 80.6255 10.276C80.6255 9.28933 80.4158 8.58633 79.9965 8.167C79.6018 7.74767 78.8865 7.538 77.8505 7.538H77.0735ZM111.458 26.186C111.458 26.704 110.299 26.963 107.98 26.963C105.661 26.963 104.403 26.778 104.206 26.408L98.027 14.864V26.371C98.027 26.815 96.88 27.037 94.586 27.037C92.3167 27.037 91.182 26.815 91.182 26.371V1.618C91.182 1.248 92.1564 1.063 94.105 1.063C94.8697 1.063 95.7577 1.137 96.769 1.285C97.805 1.40833 98.434 1.655 98.656 2.025L104.576 13.421V1.803C104.576 1.33433 105.723 1.1 108.017 1.1C110.311 1.1 111.458 1.33433 111.458 1.803V26.186ZM127.199 11.386C127.668 11.386 127.902 12.2493 127.902 13.976C127.902 14.494 127.841 15.1107 127.717 15.826C127.619 16.5167 127.421 16.862 127.125 16.862H122.426V20.562H129.234C129.654 20.562 129.937 21.1047 130.085 22.19C130.159 22.6587 130.196 23.1643 130.196 23.707C130.196 24.225 130.122 24.9033 129.974 25.742C129.826 26.5807 129.58 27 129.234 27H116.58C115.643 27 115.174 26.6177 115.174 25.853V2.062C115.174 1.42067 115.458 1.1 116.025 1.1H129.271C129.789 1.1 130.048 2.19767 130.048 4.393C130.048 6.56367 129.789 7.649 129.271 7.649H122.426V11.386H127.199ZM147.148 2.099C147.444 1.359 148.986 0.989 151.773 0.989C152.489 0.989 153.364 1.05067 154.4 1.174C155.461 1.27267 155.991 1.37133 155.991 1.47L149.701 14.272L156.213 26.519C156.287 26.6423 155.757 26.7657 154.622 26.889C153.488 26.9877 152.526 27.037 151.736 27.037C148.604 27.037 146.889 26.6177 146.593 25.779L143.818 18.712L141.302 26.001C141.056 26.6917 139.477 27.037 136.566 27.037C135.851 27.037 134.963 26.9877 133.902 26.889C132.842 26.7903 132.361 26.6547 132.459 26.482L138.231 13.68L132.237 1.47C132.163 1.34666 132.669 1.23566 133.754 1.137C134.864 1.01366 135.802 0.951998 136.566 0.951998C139.674 0.951998 141.376 1.396 141.672 2.284L144.225 8.5L147.148 2.099Z"
                                          fill="url(#paint0_linear_3001_1051)"></path>
                                    <defs>
                                        <linearGradient id="paint0_linear_3001_1051" x1="-6" y1="-22.75" x2="13.6088"
                                                        y2="74.6316" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#FFB400"></stop>
                                            <stop offset="1" stop-color="#FF6C02"></stop>
                                        </linearGradient>
                                    </defs>
                                </svg>
                                <div class="searchBar" style="position: relative">
                                    <input class="border-0" placeholder="輸入商品名稱或貨號以搜尋"
                                           style="display: flex;width: 357px;height: 56px;padding: 17px 24px;justify-content: center;gap: 10px;border-radius: 10px;background: #F7F7F7;font-size: 18px;"
                                           onchange="${gvc.event((e) => {
                                               vm.query = e.value;
                                           })}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25"
                                         fill="none"
                                         style="width: 24px;height: 24px;flex-shrink: 0;position:absolute;top: 17px;right: 24px;">
                                        <g clip-path="url(#clip0_12216_123850)">
                                            <path d="M19.5 9.92139C19.5 12.0729 18.8016 14.0604 17.625 15.6729L23.5594 21.612C24.1453 22.1979 24.1453 23.1495 23.5594 23.7355C22.9734 24.3214 22.0219 24.3214 21.4359 23.7355L15.5016 17.7964C13.8891 18.9776 11.9016 19.6714 9.75 19.6714C4.36406 19.6714 0 15.3073 0 9.92139C0 4.53545 4.36406 0.171387 9.75 0.171387C15.1359 0.171387 19.5 4.53545 19.5 9.92139ZM9.75 16.6714C10.6364 16.6714 11.5142 16.4968 12.3331 16.1576C13.1521 15.8184 13.8962 15.3212 14.523 14.6944C15.1498 14.0676 15.647 13.3234 15.9862 12.5045C16.3254 11.6856 16.5 10.8078 16.5 9.92139C16.5 9.03496 16.3254 8.15722 15.9862 7.33827C15.647 6.51933 15.1498 5.77521 14.523 5.14842C13.8962 4.52162 13.1521 4.02442 12.3331 3.6852C11.5142 3.34598 10.6364 3.17139 9.75 3.17139C8.86358 3.17139 7.98583 3.34598 7.16689 3.6852C6.34794 4.02442 5.60382 4.52162 4.97703 5.14842C4.35023 5.77521 3.85303 6.51933 3.51381 7.33827C3.17459 8.15722 3 9.03496 3 9.92139C3 10.8078 3.17459 11.6856 3.51381 12.5045C3.85303 13.3234 4.35023 14.0676 4.97703 14.6944C5.60382 15.3212 6.34794 15.8184 7.16689 16.1576C7.98583 16.4968 8.86358 16.6714 9.75 16.6714Z"
                                                  fill="#8D8D8D"/>
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_12216_123850">
                                                <rect width="24" height="24" fill="white"
                                                      transform="translate(0 0.171387)"/>
                                            </clipPath>
                                        </defs>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        ${gvc.bindView({
                            bind: "nav-slide",
                            dataList: [{obj: vm, key: 'type'}],
                            view: () => {
                                let page = [
                                    {
                                        selectIcon: html`
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"
                                                 viewBox="0 0 28 28" fill="none">
                                                <g clip-path="url(#clip0_12231_77522)">
                                                    <path d="M13.2444 2.51333C13.6819 2.14758 14.3187 2.14758 14.7562 2.51333L27.5895 13.2933C28.0805 13.7072 28.1437 14.4339 27.7256 14.92C27.3076 15.406 26.5735 15.4638 26.0826 15.0547L24.8867 14.0537V23.029C24.8867 25.1561 23.1465 26.879 20.9978 26.879H6.99784C4.84923 26.879 3.10895 25.1561 3.10895 23.029V14.0537L1.91798 15.0547C1.427 15.4686 0.688116 15.406 0.274921 14.92C-0.138273 14.4339 -0.0799399 13.7024 0.411032 13.2933L13.2444 2.51333ZM13.9978 4.90995L5.44228 12.095V23.029C5.44228 23.8808 6.13742 24.569 6.99784 24.569H9.33117V17.254C9.33117 16.1905 10.2013 15.329 11.2756 15.329H16.7201C17.7944 15.329 18.6645 16.1905 18.6645 17.254V24.569H20.9978C21.8583 24.569 22.5534 23.8808 22.5534 23.029V12.095L13.9978 4.90995ZM11.6645 24.569H16.3312V17.639H11.6645V24.569Z"
                                                          fill="#393939"/>
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_12231_77522">
                                                        <rect width="28" height="28" fill="white"/>
                                                    </clipPath>
                                                </defs>
                                            </svg>`,
                                        unselectIcon: html`
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"
                                                 viewBox="0 0 28 28" fill="none">
                                                <g clip-path="url(#clip0_12231_77522)">
                                                    <path d="M13.2444 2.51333C13.6819 2.14758 14.3187 2.14758 14.7562 2.51333L27.5895 13.2933C28.0805 13.7072 28.1437 14.4339 27.7256 14.92C27.3076 15.406 26.5735 15.4638 26.0826 15.0547L24.8867 14.0537V23.029C24.8867 25.1561 23.1465 26.879 20.9978 26.879H6.99784C4.84923 26.879 3.10895 25.1561 3.10895 23.029V14.0537L1.91798 15.0547C1.427 15.4686 0.688116 15.406 0.274921 14.92C-0.138273 14.4339 -0.0799399 13.7024 0.411032 13.2933L13.2444 2.51333ZM13.9978 4.90995L5.44228 12.095V23.029C5.44228 23.8808 6.13742 24.569 6.99784 24.569H9.33117V17.254C9.33117 16.1905 10.2013 15.329 11.2756 15.329H16.7201C17.7944 15.329 18.6645 16.1905 18.6645 17.254V24.569H20.9978C21.8583 24.569 22.5534 23.8808 22.5534 23.029V12.095L13.9978 4.90995ZM11.6645 24.569H16.3312V17.639H11.6645V24.569Z"
                                                          fill="#DDDDDD"/>
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_12231_77522">
                                                        <rect width="28" height="28" fill="white"/>
                                                    </clipPath>
                                                </defs>
                                            </svg>`,
                                        title: `首頁`,
                                        type: `home`
                                    },
                                    {
                                        selectIcon: html`
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"
                                                 viewBox="0 0 28 28" fill="none">
                                                <g clip-path="url(#clip0_12231_77522)">
                                                    <path d="M13.2444 2.51333C13.6819 2.14758 14.3187 2.14758 14.7562 2.51333L27.5895 13.2933C28.0805 13.7072 28.1437 14.4339 27.7256 14.92C27.3076 15.406 26.5735 15.4638 26.0826 15.0547L24.8867 14.0537V23.029C24.8867 25.1561 23.1465 26.879 20.9978 26.879H6.99784C4.84923 26.879 3.10895 25.1561 3.10895 23.029V14.0537L1.91798 15.0547C1.427 15.4686 0.688116 15.406 0.274921 14.92C-0.138273 14.4339 -0.0799399 13.7024 0.411032 13.2933L13.2444 2.51333ZM13.9978 4.90995L5.44228 12.095V23.029C5.44228 23.8808 6.13742 24.569 6.99784 24.569H9.33117V17.254C9.33117 16.1905 10.2013 15.329 11.2756 15.329H16.7201C17.7944 15.329 18.6645 16.1905 18.6645 17.254V24.569H20.9978C21.8583 24.569 22.5534 23.8808 22.5534 23.029V12.095L13.9978 4.90995ZM11.6645 24.569H16.3312V17.639H11.6645V24.569Z"
                                                          fill="#393939"/>
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_12231_77522">
                                                        <rect width="28" height="28" fill="white"/>
                                                    </clipPath>
                                                </defs>
                                            </svg>`,
                                        unselectIcon: html`
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"
                                                 viewBox="0 0 28 28" fill="none">
                                                <g clip-path="url(#clip0_12231_77522)">
                                                    <path d="M13.2444 2.51333C13.6819 2.14758 14.3187 2.14758 14.7562 2.51333L27.5895 13.2933C28.0805 13.7072 28.1437 14.4339 27.7256 14.92C27.3076 15.406 26.5735 15.4638 26.0826 15.0547L24.8867 14.0537V23.029C24.8867 25.1561 23.1465 26.879 20.9978 26.879H6.99784C4.84923 26.879 3.10895 25.1561 3.10895 23.029V14.0537L1.91798 15.0547C1.427 15.4686 0.688116 15.406 0.274921 14.92C-0.138273 14.4339 -0.0799399 13.7024 0.411032 13.2933L13.2444 2.51333ZM13.9978 4.90995L5.44228 12.095V23.029C5.44228 23.8808 6.13742 24.569 6.99784 24.569H9.33117V17.254C9.33117 16.1905 10.2013 15.329 11.2756 15.329H16.7201C17.7944 15.329 18.6645 16.1905 18.6645 17.254V24.569H20.9978C21.8583 24.569 22.5534 23.8808 22.5534 23.029V12.095L13.9978 4.90995ZM11.6645 24.569H16.3312V17.639H11.6645V24.569Z"
                                                          fill="#DDDDDD"/>
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_12231_77522">
                                                        <rect width="28" height="28" fill="white"/>
                                                    </clipPath>
                                                </defs>
                                            </svg>`,
                                        title: `菜單`,
                                        type: `menu`
                                    },
                                    {
                                        selectIcon: html`
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"
                                                 viewBox="0 0 28 28" fill="none">
                                                <path d="M24.8889 4.375C25.3167 4.375 25.6667 4.76875 25.6667 5.25V7H2.33333V5.25C2.33333 4.76875 2.68333 4.375 3.11111 4.375H24.8889ZM25.6667 12.25V22.75C25.6667 23.2313 25.3167 23.625 24.8889 23.625H3.11111C2.68333 23.625 2.33333 23.2313 2.33333 22.75V12.25H25.6667ZM3.11111 1.75C1.39514 1.75 0 3.31953 0 5.25V22.75C0 24.6805 1.39514 26.25 3.11111 26.25H24.8889C26.6049 26.25 28 24.6805 28 22.75V5.25C28 3.31953 26.6049 1.75 24.8889 1.75H3.11111ZM5.83333 18.375C5.18681 18.375 4.66667 18.9602 4.66667 19.6875C4.66667 20.4148 5.18681 21 5.83333 21H8.16667C8.81319 21 9.33333 20.4148 9.33333 19.6875C9.33333 18.9602 8.81319 18.375 8.16667 18.375H5.83333ZM12.0556 18.375C11.409 18.375 10.8889 18.9602 10.8889 19.6875C10.8889 20.4148 11.409 21 12.0556 21H17.5C18.1465 21 18.6667 20.4148 18.6667 19.6875C18.6667 18.9602 18.1465 18.375 17.5 18.375H12.0556Z"
                                                      fill="#393939"/>
                                            </svg>`,
                                        unselectIcon: html`
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"
                                                 viewBox="0 0 28 28" fill="none">
                                                <path d="M24.8889 4.375C25.3167 4.375 25.6667 4.76875 25.6667 5.25V7H2.33333V5.25C2.33333 4.76875 2.68333 4.375 3.11111 4.375H24.8889ZM25.6667 12.25V22.75C25.6667 23.2313 25.3167 23.625 24.8889 23.625H3.11111C2.68333 23.625 2.33333 23.2313 2.33333 22.75V12.25H25.6667ZM3.11111 1.75C1.39514 1.75 0 3.31953 0 5.25V22.75C0 24.6805 1.39514 26.25 3.11111 26.25H24.8889C26.6049 26.25 28 24.6805 28 22.75V5.25C28 3.31953 26.6049 1.75 24.8889 1.75H3.11111ZM5.83333 18.375C5.18681 18.375 4.66667 18.9602 4.66667 19.6875C4.66667 20.4148 5.18681 21 5.83333 21H8.16667C8.81319 21 9.33333 20.4148 9.33333 19.6875C9.33333 18.9602 8.81319 18.375 8.16667 18.375H5.83333ZM12.0556 18.375C11.409 18.375 10.8889 18.9602 10.8889 19.6875C10.8889 20.4148 11.409 21 12.0556 21H17.5C18.1465 21 18.6667 20.4148 18.6667 19.6875C18.6667 18.9602 18.1465 18.375 17.5 18.375H12.0556Z"
                                                      fill="#DDDDDD"/>
                                            </svg>`,
                                        title: `款項`,
                                        type: `payment`
                                    },
                                ]
                                return page.map((data) => {
                                    return html`
                                        <div class="d-flex flex-column justify-content-center align-items-center"
                                             style="padding: 16px 28px;gap: 6px;font-size: 20px;font-weight: 500;letter-spacing: 0.8px;${(vm.type == data.type) ? 'color:#393939;border-right: 3px solid #393939;' : 'color:#DDDDDD;'}"
                                             onclick="${gvc.event(() => {
                                                 vm.type = data.type;
                                             })}">
                                            ${(vm.type == data.type) ? data.selectIcon : data.unselectIcon}
                                            ${data.title}
                                        </div>
                                    `
                                }).join('')
                            }
                            ,
                            divCreate: {
                                class: `d-flex nav-left flex-column`,
                                style: `height: 100%;gap:24px;padding-top:114px;position:fixed;left:0px;top:0px;background: #FFF;box-shadow: 1px 0px 10px 0px rgba(0, 0, 0, 0.05);`
                            },
                        })}
                        ${gvc.bindView({
                            bind: 'mainView',
                            view: () => {
                                if (vm.type == "payment") {
                                    return html`
                                        <div class="left-panel"
                                             style="width:calc(100% - 446px);padding: 32px 36px;overflow: hidden;">
                                            <div style="font-size: 32px;font-style: normal;font-weight: 700;letter-spacing: 3.2px;color:#393939">
                                                訂單明細
                                            </div>
                                            <div class="d-flex flex-column"
                                                 style="margin-top: 32px;padding:24px;border-radius: 10px;background: #FFF;box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.08);">
                                                <div class="d-flex"
                                                     style="padding:15px 0;background: #F6F6F6;border-radius: 10px;font-weight: 700;">
                                                    <div class="col-4 text-left" style="padding-left: 23px;">商品名稱
                                                    </div>
                                                    <div class="col-2 text-center">規格</div>
                                                    <div class="col-2 text-center">單價</div>
                                                    <div class="col-2 text-center">數量</div>
                                                    <div class="col-2 text-center">小計</div>
                                                </div>
                                                <div class="d-flex flex-column">
                                                    ${(() => {
                                                        let image = 'https://d3jnmi1tfjgtti.cloudfront.net/file/234285319/1722936949034-default_image.jpg';

                                                        if (orderDetail.lineItems.length > 0) {
                                                            return orderDetail.lineItems.map((data) => {
                                                                return html`
                                                                    <div class="d-flex" style="margin-top: 26px;">
                                                                        <div class="col-4 d-flex align-items-center">
                                                                            <div style="width: 54px;height: 54px;border-radius: 5px;background: 50%/cover url('${data.preview_image}')"></div>
                                                                            <div style="font-size: 16px;font-style: normal;font-weight: 500;letter-spacing: 0.64px;margin-left: 12px;">
                                                                                ${data.title}
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-2 d-flex align-items-center justify-content-center"
                                                                             style="font-family: Inter,serif;font-size: 16px;font-weight: 400;gap: 4px;">
                                                                            ${(() => {
                                                                                return (data.spec.length > 0) ? data.spec.map((spec) => {
                                                                                            return html`
                                                                                                <div class="">${spec}</div>`
                                                                                        })
                                                                                        : html`
                                                                                            <div>單一規格</div>
                                                                                        `
                                                                            })()}
                                                                        </div>
                                                                        <div class="col-2 d-flex align-items-center justify-content-center">
                                                                                NT.${data.sale_price}
                                                                        </div>
                                                                        <div class="col-2 d-flex align-items-center justify-content-center">
                                                                            ${data.count}
                                                                        </div>
                                                                        <div class="col-2 d-flex align-items-center justify-content-center">
                                                                                NT.${data.sale_price * data.count}
                                                                        </div>
                                                                    </div>
                                                                `
                                                            }).join('')
                                                        }
                                                        return ``
                                                    })()}
                                                </div>
                                            </div>
                                        </div>
                                        <div style="height: 100%;width: 446px;overflow: auto;padding: 36px 24px;background: #FFF;box-shadow: 1px 0 10px 0 rgba(0, 0, 0, 0.10);">
                                            <div style="font-size: 32px;font-weight: 700;letter-spacing: 3.2px;">
                                                訂單款項
                                            </div>
                                            <div style="margin-top: 32px;font-size: 18px;font-weight: 700;letter-spacing: 0.72px;">
                                                付款方式
                                            </div>
                                            ${gvc.bindView({
                                                bind: "payment",
                                                dataList: [{obj: vm, key: 'paySelect'}],
                                                view: () => {
                                                    function drawIcon(black: boolean , type:string) {
                                                        switch (type) {
                                                            case "cash" :
                                                                return html`
                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="28"
                                                                         height="28" viewBox="0 0 28 28" fill="none">
                                                                        <path d="M9.625 4.8125C9.625 4.81797 9.63047 4.84531 9.65781 4.89453C9.69063 4.96016 9.76719 5.06406 9.91484 5.19531C9.93672 5.21172 9.95859 5.23359 9.98047 5.25C8.95781 5.27187 7.9625 5.34297 7.00547 5.47422L7 4.8125C7 3.82812 7.53047 3.04062 8.15391 2.47734C8.77734 1.91406 9.61406 1.46562 10.5328 1.11563C12.3813 0.410156 14.8477 0 17.5 0C20.1523 0 22.6187 0.410156 24.4617 1.11016C25.3805 1.46016 26.2172 1.90859 26.8406 2.47187C27.4641 3.03516 28 3.82812 28 4.8125V10.5V16.1875C28 17.1719 27.4695 17.9594 26.8461 18.5227C26.2227 19.0859 25.3859 19.5344 24.4672 19.8844C23.9422 20.0867 23.368 20.2617 22.7555 20.4094V17.6914C23.0344 17.6094 23.2914 17.5219 23.532 17.4289C24.2758 17.1445 24.7898 16.8383 25.0906 16.5703C25.2383 16.4391 25.3148 16.3352 25.3477 16.2695C25.3805 16.2094 25.3805 16.1875 25.3805 16.1875V13.8031C25.0906 13.9453 24.7844 14.0766 24.4672 14.1969C23.9422 14.3992 23.368 14.5742 22.7555 14.7219V12.0039C23.0344 11.9219 23.2914 11.8344 23.532 11.7414C24.2758 11.457 24.7898 11.1508 25.0906 10.8828C25.2383 10.7516 25.3148 10.6477 25.3477 10.582C25.375 10.5328 25.3805 10.5055 25.3805 10.5V8.11562C25.0906 8.25781 24.7844 8.38906 24.4672 8.50938C23.718 8.79375 22.8594 9.03438 21.9352 9.21484C21.6562 8.80469 21.3336 8.45469 21.0164 8.17031C20.4641 7.67266 19.8242 7.26797 19.157 6.93438C20.8906 6.80859 22.4 6.48594 23.532 6.05391C24.2758 5.76953 24.7898 5.46328 25.0906 5.19531C25.2383 5.06406 25.3148 4.96016 25.3477 4.89453C25.375 4.84531 25.3805 4.81797 25.3805 4.8125C25.3805 4.8125 25.3805 4.78516 25.3477 4.73047C25.3148 4.66484 25.2383 4.56094 25.0906 4.42969C24.7898 4.15625 24.2758 3.85 23.532 3.57109C22.05 3.00234 19.9172 2.625 17.5 2.625C15.0828 2.625 12.95 3.00234 11.4734 3.56562C10.7297 3.85 10.2156 4.15625 9.91484 4.42422C9.76719 4.55547 9.69063 4.65938 9.65781 4.725C9.625 4.78516 9.625 4.80703 9.625 4.80703V4.8125ZM2.625 11.8125C2.625 11.818 2.63047 11.8453 2.65781 11.8945C2.69062 11.9602 2.76719 12.0641 2.91484 12.1953C3.21563 12.4688 3.72969 12.775 4.47344 13.0539C5.95 13.6172 8.08281 13.9945 10.5 13.9945C12.9172 13.9945 15.05 13.6172 16.5266 13.0539C17.2703 12.7695 17.7844 12.4633 18.0852 12.1953C18.2328 12.0641 18.3094 11.9602 18.3422 11.8945C18.3695 11.8453 18.375 11.818 18.375 11.8125C18.375 11.8125 18.375 11.7852 18.3422 11.7305C18.3094 11.6648 18.2328 11.5609 18.0852 11.4297C17.7844 11.1562 17.2703 10.85 16.5266 10.5711C15.05 10.0078 12.9172 9.63047 10.5 9.63047C8.08281 9.63047 5.95 10.0078 4.47344 10.5711C3.72969 10.8555 3.21563 11.1617 2.91484 11.4297C2.76719 11.5609 2.69062 11.6648 2.65781 11.7305C2.625 11.7906 2.625 11.8125 2.625 11.8125ZM0 11.8125C0 10.8281 0.530469 10.0406 1.15391 9.47734C1.77734 8.91406 2.61406 8.46562 3.53281 8.11562C5.38125 7.41016 7.84766 7 10.5 7C13.1523 7 15.6187 7.41016 17.4617 8.11016C18.3805 8.46016 19.2172 8.90859 19.8406 9.47188C20.4641 10.0352 21 10.8281 21 11.8125V17.5V23.1875C21 24.1719 20.4695 24.9594 19.8461 25.5227C19.2227 26.0859 18.3859 26.5344 17.4672 26.8844C15.6187 27.5898 13.1523 28 10.5 28C7.84766 28 5.38125 27.5898 3.53828 26.8898C2.61953 26.5398 1.78828 26.0914 1.15938 25.5281C0.530469 24.9648 0 24.1719 0 23.1875V17.5V11.8125ZM18.375 17.5V15.1156C18.0852 15.2578 17.7789 15.3891 17.4617 15.5094C15.6187 16.2148 13.1523 16.625 10.5 16.625C7.84766 16.625 5.38125 16.2148 3.53828 15.5148C3.22109 15.3945 2.91484 15.2633 2.625 15.1211V17.5C2.625 17.5055 2.63047 17.5328 2.65781 17.582C2.69062 17.6477 2.76719 17.7516 2.91484 17.8828C3.21563 18.1562 3.72969 18.4625 4.47344 18.7414C5.95 19.3047 8.08281 19.682 10.5 19.682C12.9172 19.682 15.05 19.3047 16.5266 18.7414C17.2703 18.457 17.7844 18.1508 18.0852 17.8828C18.2328 17.7516 18.3094 17.6477 18.3422 17.582C18.3695 17.5328 18.375 17.5055 18.375 17.5ZM3.53828 21.2023C3.22109 21.082 2.91484 20.9508 2.625 20.8086V23.1875C2.625 23.1875 2.625 23.2148 2.65781 23.2695C2.69062 23.3352 2.76719 23.4391 2.91484 23.5703C3.21563 23.8438 3.72969 24.15 4.47344 24.4289C5.95 24.9922 8.08281 25.3695 10.5 25.3695C12.9172 25.3695 15.05 24.9922 16.5266 24.4289C17.2703 24.1445 17.7844 23.8383 18.0852 23.5703C18.2328 23.4391 18.3094 23.3352 18.3422 23.2695C18.375 23.2094 18.375 23.1875 18.375 23.1875V20.8031C18.0852 20.9453 17.7789 21.0766 17.4617 21.1969C15.6187 21.9023 13.1523 22.3125 10.5 22.3125C7.84766 22.3125 5.38125 21.9023 3.53828 21.2023Z"
                                                                              fill="${black ? `#393939` : `#8D8D8D`}"/>
                                                                    </svg>
                                                                `
                                                            case "creditCard" :
                                                                return html`
                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="28"
                                                                         height="28" viewBox="0 0 28 28" fill="none">
                                                                        <path d="M24.8889 5.84375C25.3167 5.84375 25.6667 6.19531 25.6667 6.625V8.1875H2.33333V6.625C2.33333 6.19531 2.68333 5.84375 3.11111 5.84375H24.8889ZM25.6667 12.875V22.25C25.6667 22.6797 25.3167 23.0312 24.8889 23.0312H3.11111C2.68333 23.0312 2.33333 22.6797 2.33333 22.25V12.875H25.6667ZM3.11111 3.5C1.39514 3.5 0 4.90137 0 6.625V22.25C0 23.9736 1.39514 25.375 3.11111 25.375H24.8889C26.6049 25.375 28 23.9736 28 22.25V6.625C28 4.90137 26.6049 3.5 24.8889 3.5H3.11111ZM5.83333 18.3437C5.18681 18.3437 4.66667 18.8662 4.66667 19.5156C4.66667 20.165 5.18681 20.6875 5.83333 20.6875H8.16667C8.81319 20.6875 9.33333 20.165 9.33333 19.5156C9.33333 18.8662 8.81319 18.3437 8.16667 18.3437H5.83333ZM12.0556 18.3437C11.409 18.3437 10.8889 18.8662 10.8889 19.5156C10.8889 20.165 11.409 20.6875 12.0556 20.6875H17.5C18.1465 20.6875 18.6667 20.165 18.6667 19.5156C18.6667 18.8662 18.1465 18.3437 17.5 18.3437H12.0556Z"
                                                                              fill="${black ? `#393939` : `#8D8D8D`}"/>
                                                                    </svg>
                                                                `
                                                            default:
                                                                return html`
                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="28"
                                                                         height="28" viewBox="0 0 28 28" fill="none">
                                                                        <g clip-path="url(#clip0_12384_217611)">
                                                                            <path d="M3.5 0C2.53203 0 1.75 0.782031 1.75 1.75V5.25C1.75 6.21797 2.53203 7 3.5 7H7.875V8.75H4.78516C3.04609 8.75 1.56406 10.0297 1.31797 11.7523L0.0328125 20.7539C0.0109375 20.918 0 21.082 0 21.2461V24.5C0 26.4305 1.56953 28 3.5 28H24.5C26.4305 28 28 26.4305 28 24.5V21.2461C28 21.082 27.9891 20.9125 27.9672 20.7539L26.6766 11.7523C26.4305 10.0297 24.9539 8.75 23.2094 8.75H11.375V7H15.75C16.718 7 17.5 6.21797 17.5 5.25V1.75C17.5 0.782031 16.718 0 15.75 0H3.5ZM5.25 2.625H14C14.4813 2.625 14.875 3.01875 14.875 3.5C14.875 3.98125 14.4813 4.375 14 4.375H5.25C4.76875 4.375 4.375 3.98125 4.375 3.5C4.375 3.01875 4.76875 2.625 5.25 2.625ZM2.625 24.5V23.625H25.375V24.5C25.375 24.9813 24.9813 25.375 24.5 25.375H3.5C3.01875 25.375 2.625 24.9813 2.625 24.5ZM24.0789 12.1242L25.3477 21H2.65234L3.92109 12.1242C3.98125 11.6922 4.35312 11.375 4.78516 11.375H23.2148C23.6523 11.375 24.0187 11.6977 24.0789 12.1242ZM6.125 12.6875C5.7769 12.6875 5.44306 12.8258 5.19692 13.0719C4.95078 13.3181 4.8125 13.6519 4.8125 14C4.8125 14.3481 4.95078 14.6819 5.19692 14.9281C5.44306 15.1742 5.7769 15.3125 6.125 15.3125C6.4731 15.3125 6.80694 15.1742 7.05308 14.9281C7.29922 14.6819 7.4375 14.3481 7.4375 14C7.4375 13.6519 7.29922 13.3181 7.05308 13.0719C6.80694 12.8258 6.4731 12.6875 6.125 12.6875ZM10.0625 14C10.0625 14.3481 10.2008 14.6819 10.4469 14.9281C10.6931 15.1742 11.0269 15.3125 11.375 15.3125C11.7231 15.3125 12.0569 15.1742 12.3031 14.9281C12.5492 14.6819 12.6875 14.3481 12.6875 14C12.6875 13.6519 12.5492 13.3181 12.3031 13.0719C12.0569 12.8258 11.7231 12.6875 11.375 12.6875C11.0269 12.6875 10.6931 12.8258 10.4469 13.0719C10.2008 13.3181 10.0625 13.6519 10.0625 14ZM8.75 17.0625C8.4019 17.0625 8.06806 17.2008 7.82192 17.4469C7.57578 17.6931 7.4375 18.0269 7.4375 18.375C7.4375 18.7231 7.57578 19.0569 7.82192 19.3031C8.06806 19.5492 8.4019 19.6875 8.75 19.6875C9.0981 19.6875 9.43194 19.5492 9.67808 19.3031C9.92422 19.0569 10.0625 18.7231 10.0625 18.375C10.0625 18.0269 9.92422 17.6931 9.67808 17.4469C9.43194 17.2008 9.0981 17.0625 8.75 17.0625ZM15.3125 14C15.3125 14.3481 15.4508 14.6819 15.6969 14.9281C15.9431 15.1742 16.2769 15.3125 16.625 15.3125C16.9731 15.3125 17.3069 15.1742 17.5531 14.9281C17.7992 14.6819 17.9375 14.3481 17.9375 14C17.9375 13.6519 17.7992 13.3181 17.5531 13.0719C17.3069 12.8258 16.9731 12.6875 16.625 12.6875C16.2769 12.6875 15.9431 12.8258 15.6969 13.0719C15.4508 13.3181 15.3125 13.6519 15.3125 14ZM14 17.0625C13.6519 17.0625 13.3181 17.2008 13.0719 17.4469C12.8258 17.6931 12.6875 18.0269 12.6875 18.375C12.6875 18.7231 12.8258 19.0569 13.0719 19.3031C13.3181 19.5492 13.6519 19.6875 14 19.6875C14.3481 19.6875 14.6819 19.5492 14.9281 19.3031C15.1742 19.0569 15.3125 18.7231 15.3125 18.375C15.3125 18.0269 15.1742 17.6931 14.9281 17.4469C14.6819 17.2008 14.3481 17.0625 14 17.0625ZM20.5625 14C20.5625 14.1724 20.5964 14.343 20.6624 14.5023C20.7284 14.6615 20.825 14.8062 20.9469 14.9281C21.0688 15.05 21.2135 15.1466 21.3727 15.2126C21.532 15.2786 21.7026 15.3125 21.875 15.3125C22.0474 15.3125 22.218 15.2786 22.3773 15.2126C22.5365 15.1466 22.6812 15.05 22.8031 14.9281C22.925 14.8062 23.0216 14.6615 23.0876 14.5023C23.1536 14.343 23.1875 14.1724 23.1875 14C23.1875 13.8276 23.1536 13.657 23.0876 13.4977C23.0216 13.3385 22.925 13.1938 22.8031 13.0719C22.6812 12.95 22.5365 12.8534 22.3773 12.7874C22.218 12.7214 22.0474 12.6875 21.875 12.6875C21.7026 12.6875 21.532 12.7214 21.3727 12.7874C21.2135 12.8534 21.0688 12.95 20.9469 13.0719C20.825 13.1938 20.7284 13.3385 20.6624 13.4977C20.5964 13.657 20.5625 13.8276 20.5625 14ZM19.25 17.0625C18.9019 17.0625 18.5681 17.2008 18.3219 17.4469C18.0758 17.6931 17.9375 18.0269 17.9375 18.375C17.9375 18.7231 18.0758 19.0569 18.3219 19.3031C18.5681 19.5492 18.9019 19.6875 19.25 19.6875C19.5981 19.6875 19.9319 19.5492 20.1781 19.3031C20.4242 19.0569 20.5625 18.7231 20.5625 18.375C20.5625 18.0269 20.4242 17.6931 20.1781 17.4469C19.9319 17.2008 19.5981 17.0625 19.25 17.0625Z"
                                                                                  fill="${black ? `#393939` : `#8D8D8D`}"/>
                                                                        </g>
                                                                        <defs>
                                                                            <clipPath id="clip0_12384_217611">
                                                                                <rect width="28" height="28"
                                                                                      fill="white"/>
                                                                            </clipPath>
                                                                        </defs>
                                                                    </svg>
                                                                `
                                                        }
                                                    }

                                                    let btnArray = [
                                                        {
                                                            title: `現金`,
                                                            value: 'cash',
                                                            event: () => {
                                                                vm.paySelect = 'cash';
                                                            }
                                                        },
                                                        {
                                                            title: `刷卡`,
                                                            value: 'creditCard',
                                                            event: () => {
                                                                vm.paySelect = 'creditCard';
                                                            }
                                                        },
                                                        {
                                                            title: `其他`,
                                                            value: 'other',
                                                            event: () => {
                                                                vm.paySelect = 'other';
                                                            }
                                                        },
                                                    ]
                                                    return btnArray.map((btn) => {
                                                        return html`
                                                            <div style="display: flex;flex-direction: column;justify-content: center;align-items: center;padding: 20px 36px;border-radius: 10px;background: #F6F6F6;${(vm.paySelect == btn.value) ? `color:#393939;border-radius: 10px;border: 3px solid #393939;box-shadow: 2px 2px 15px 0px rgba(0, 0, 0, 0.20);` : 'color:#8D8D8D;'}"
                                                                 onclick="${gvc.event(() => {
                                                                     btn.event();
                                                                     console.log(vm.paySelect);
                                                                 })}">
                                                                <div style="width: 28px;height: 28px;">
                                                                    ${drawIcon(vm.paySelect == btn.value , btn.value)}
                                                                </div>
                                                                <div style="font-size: 16px;font-weight: 500;letter-spacing: 0.64px;">
                                                                    ${btn.title}
                                                                </div>
                                                            </div>
                                                        `
                                                    }).join('')
                                                },
                                                divCreate: {
                                                    class: ``,
                                                    style: `display: flex;justify-content: space-between;margin-top: 24px;`
                                                }
                                            })}
                                            <div class="w-100" style="margin: 32px 0;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="398" height="2"
                                                     viewBox="0 0 398 2" fill="none">
                                                    <path d="M0 1H398" stroke="#DDDDDD" stroke-dasharray="8 8"/>
                                                </svg>
                                            </div>
                                            <div class="d-flex flex-column w-100">
                                                <div class="d-flex">
                                                    <div style="font-size: 16px;font-weight: 500;letter-spacing: 0.64px;">
                                                        小計總額
                                                    </div>
                                                    <div class="ms-auto"
                                                         style="font-size: 16px;font-style: normal;font-weight: 700;letter-spacing: 0.64px;">
                                                        ${orderDetail.subtotal}
                                                    </div>
                                                </div>
                                                <div class="d-flex">
                                                    <div style="font-size: 16px;font-weight: 500;letter-spacing: 0.64px;">
                                                        活動折扣
                                                    </div>
                                                    <div class="ms-auto"
                                                         style="font-size: 16px;font-style: normal;font-weight: 700;letter-spacing: 0.64px;">
                                                            -${orderDetail.discount}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="w-100" style="margin: 32px 0;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="398" height="2"
                                                     viewBox="0 0 398 2" fill="none">
                                                    <path d="M0 1H398" stroke="#DDDDDD" stroke-dasharray="8 8"/>
                                                </svg>
                                            </div>
                                            <div class="d-flex flex-column w-100">
                                                <div class="d-flex"
                                                     style="font-size: 16px;font-weight: 400;margin-bottom: 12px;">
                                                    <div style="">總金額</div>
                                                    <div class="ms-auto" style="">${orderDetail.total}</div>
                                                </div>
                                                <div class="d-flex" style="font-size: 16px;font-weight: 400;">
                                                    <div class="d-flex align-items-center justify-content-center"
                                                         style="color: #393939;font-size: 18px;font-weight: 700;letter-spacing: 0.72px;">
                                                        實際付款金額
                                                    </div>
                                                    <input style="display: flex;width: 143px;height: 51px;padding: 9px 18px;border-radius: 10px;border: 1px solid #DDD;"
                                                           class="ms-auto" value="${orderDetail.total}"
                                                           onchange="${gvc.event((e) => {
                                                               realTotal = e.value
                                                           })}">
                                                </div>
                                            </div>
                                            <div style="margin-top: 32px;display: flex;padding: 12px 24px;justify-content: center;align-items: center;border-radius: 10px;background: #393939;color: #FFF;font-size: 18px;font-style: normal;font-weight: 500;line-height: normal;letter-spacing: 0.72px;"
                                                 onclick="${gvc.event(() => {
                                                     if (orderDetail.lineItems.length < 0) {
                                                         alert("請先選擇商品")
                                                         return
                                                     }
                                                     //設定POS機資訊
                                                     orderDetail.pos_info = {};
                                                     console.log("orderDetail -- " , orderDetail)
                                                     orderDetail.pos_info.payment = vm.paySelect;
                                                     
                                                     let passData = JSON.parse(JSON.stringify(orderDetail))
                                                     passData.total = orderDetail.total;
                                                     passData.realTotal = (realTotal > 0) ? realTotal : orderDetail.total;
                                                     passData.orderStatus = 1;
                                                     passData.pay_status = 1;

                                                     gvc.addStyle(`
                .dialog-box {
                    width: 100vw;
                    height: 100vh;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background-color: rgba(0, 0, 0, 0.5);
                    z-index: 10000;
                }

                .dialog-content {
                    width: 452px;
                    background: white;
                    padding: 24px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    flex-direction: column;
                    border-radius: 0.5rem;
                    margin: auto;
                    box-shadow: 0 0.275rem 1.25rem rgba(19, 16, 34, 0.05), 0 0.25rem 0.5625rem rgba(19, 16, 34, 0.03);
                    color: #393939;
                    letter-spacing: 1px;
                }

                .dialog-absolute {
                    width: 100%;
                    border-top: 1px solid #e2e5f1;
                    position: absolute;
                    left: 0px;
                    bottom: 0px;
                    height: 40px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                }

                .hover-cancel {
                    background-color: #fff;
                    border-radius: 0 0 0 0.5rem;
                }

                .hover-cancel:hover {
                    background-color: #e6e6e6;
                }

                .hover-save {
                    background-color: #393939;
                    border-radius: 0 0 0.5rem;
                }

                .hover-save:hover {
                    background-color: #646464;
                }
            `);
                                                     gvc.glitter.innerDialog((gvc: GVC) => {
                                                         return html`
                                                             <div class="dialog-box">
                                                                 <div class="dialog-content position-relative pb-5"
                                                                      style="width: 452px;height: 241px;">
                                                                     <div class="my-3 fs-6 fw-500 text-center"
                                                                          style="white-space: normal; overflow-wrap: anywhere;font-size: 28px;font-style: normal;font-weight: 700;line-height: normal;letter-spacing: 2.8px;">
                                                                         確定要結帳嗎？
                                                                     </div>
                                                                     <div style="font-size: 18px;font-style: normal;font-weight: 400;line-height: 160%;letter-spacing: 0.72px;">
                                                                         本次結帳金額為 <span style="font-size: 28px;font-style: normal;font-weight: 700;line-height: 160%;">$${passData.realTotal.toLocaleString()}</span> 
                                                                     </div>
                                                                     <div class="d-flex align-items-center justify-content-center" style="margin-top: 24px;font-size: 16px;font-weight: 700;letter-spacing: 0.64px;gap:14px;">
                                                                         <div style="border-radius: 10px;border: 1px solid #DDD;background: #FFF;padding: 12px 24px;color: #393939" onclick="${gvc.event(() => {
                                                                             gvc.glitter.closeDiaLog()
                                                                         })}">取消</div>
                                                                         <div style="border-radius: 10px;background: #393939;padding: 12px 24px;color: #FFF;" onclick="${gvc.event(() => {
                                                                             gvc.glitter.closeDiaLog()
                                                                             dialog.dataLoading({
                                                                                 visible: true,
                                                                                 text: `訂單成立中`
                                                                             })

                                                                             ApiShop.toPOSCheckout(passData).then(r => {
                                                                                 dialog.dataLoading({visible: false})

                                                                                 gvc.glitter.innerDialog((gvc: GVC) => {
                                                                                     return html`
                                                                                                 <div style="position: relative;width: 492px;height: 223px;border-radius: 10px;background: #FFF;display: flex;flex-direction: column;align-items: center;justify-content: center;">
                                                                                                     <svg xmlns="http://www.w3.org/2000/svg"
                                                                                                          width="14"
                                                                                                          height="14"
                                                                                                          viewBox="0 0 14 14"
                                                                                                          fill="none"
                                                                                                          style="position: absolute;top: 12px;right: 12px;cursor: pointer;"
                                                                                                          onclick="${gvc.event(() => {
                                                                                         gvc.glitter.closeDiaLog();
                                                                                     })}">
                                                                                                         <path d="M1 1L13 13"
                                                                                                               stroke="#393939"
                                                                                                               stroke-linecap="round"/>
                                                                                                         <path d="M13 1L1 13"
                                                                                                               stroke="#393939"
                                                                                                               stroke-linecap="round"/>
                                                                                                     </svg>

                                                                                                     <svg xmlns="http://www.w3.org/2000/svg"
                                                                                                          width="75"
                                                                                                          height="75"
                                                                                                          viewBox="0 0 75 75"
                                                                                                          fill="none">
                                                                                                         <g clip-path="url(#clip0_9850_171427)">
                                                                                                             <path d="M37.5 7.03125C45.5808 7.03125 53.3307 10.2413 59.0447 15.9553C64.7587 21.6693 67.9688 29.4192 67.9688 37.5C67.9688 45.5808 64.7587 53.3307 59.0447 59.0447C53.3307 64.7587 45.5808 67.9688 37.5 67.9688C29.4192 67.9688 21.6693 64.7587 15.9553 59.0447C10.2413 53.3307 7.03125 45.5808 7.03125 37.5C7.03125 29.4192 10.2413 21.6693 15.9553 15.9553C21.6693 10.2413 29.4192 7.03125 37.5 7.03125ZM37.5 75C47.4456 75 56.9839 71.0491 64.0165 64.0165C71.0491 56.9839 75 47.4456 75 37.5C75 27.5544 71.0491 18.0161 64.0165 10.9835C56.9839 3.95088 47.4456 0 37.5 0C27.5544 0 18.0161 3.95088 10.9835 10.9835C3.95088 18.0161 0 27.5544 0 37.5C0 47.4456 3.95088 56.9839 10.9835 64.0165C18.0161 71.0491 27.5544 75 37.5 75ZM54.0527 30.6152C55.4297 29.2383 55.4297 27.0117 54.0527 25.6494C52.6758 24.2871 50.4492 24.2725 49.0869 25.6494L32.8271 41.9092L25.9424 35.0244C24.5654 33.6475 22.3389 33.6475 20.9766 35.0244C19.6143 36.4014 19.5996 38.6279 20.9766 39.9902L30.3516 49.3652C31.7285 50.7422 33.9551 50.7422 35.3174 49.3652L54.0527 30.6152Z"
                                                                                                                   fill="#393939"/>
                                                                                                         </g>
                                                                                                         <defs>
                                                                                                             <clipPath
                                                                                                                     id="clip0_9850_171427">
                                                                                                                 <rect width="75"
                                                                                                                       height="75"
                                                                                                                       fill="white"/>
                                                                                                             </clipPath>
                                                                                                         </defs>
                                                                                                     </svg>
                                                                                                     <div style="text-align: center;color: #393939;font-size: 16px;font-weight: 400;line-height: 160%;margin-top: 24px;">
                                                                                                         訂單新增成功！
                                                                                                     </div>
                                                                                                 </div>
                                                                                             `
                                                                                 }, 'orderFinish', {
                                                                                     dismiss: () => {
                                                                                         // vm.type = "list";
                                                                                     }
                                                                                 })

                                                                             })
                                                                         })}">確定</div>
                                                                     </div>
                                                                 </div>
                                                             </div>
                                                         `
                                                     }, 'orderFinish', {
                                                         dismiss: () => {
                                                             // vm.type = "list";
                                                         }
                                                     })
                                                     return ``

                                                 })}">前往結賬
                                            </div>

                                        </div>
                                    `
                                }
                                return html`
                                    <div class="left-panel"
                                         style="width:calc(100% - 352px);padding: 32px 36px;overflow: hidden;">
                                        ${gvc.bindView({
                                            bind: `category`,
                                            view: () => {
                                                if (vm.categorySearch) {
                                                    ApiShop.getCollection().then(r => {
                                                        vm.categorySearch = false;

                                                        r.response.value.forEach((data: any) => {
                                                            vm.categories.push({
                                                                key: data.code,
                                                                value: data.title
                                                            })
                                                        })
                                                        gvc.notifyDataChange('category');
                                                    })
                                                }

                                                // "全部商品","最新上架","熱門商品","貓跳台","貓抓板","逗貓棒","貓糧"
                                                return vm.categories.map((data: any) => {
                                                    return html`
                                                        <div style="font-size: 18px;;width:131px;height:51px;white-space: nowrap;display: flex;padding: 12px 24px;justify-content: center;align-items: center;border-radius: 10px;box-shadow: 0px 0px 7px 0px rgba(0, 0, 0, 0.10);${data?.select ? `background: #393939;color: #FFF;` : `background: #FFF;color#393939;`}"
                                                             onclick="${gvc.event(() => {
                                                                 vm.categories.forEach((category) => {
                                                                     category.select = false;
                                                                 })
                                                                 data.select = true;
                                                                 vm.searchable = true;
                                                                 gvc.notifyDataChange(['category', 'productShow']);
                                                             })}">
                                                            ${data.value}
                                                        </div>
                                                    `
                                                }).join('')
                                            },
                                            divCreate: {
                                                class: `d-flex `,
                                                style: `width:100%;overflow: scroll;gap:24px;padding-bottom:32px;`
                                            }
                                        })}
                                        ${gvc.bindView({
                                            bind: `productShow`,
                                            view: () => {
                                                let image = 'https://d3jnmi1tfjgtti.cloudfront.net/file/234285319/1722936949034-default_image.jpg';
                                                let parent = document.querySelector(`.left-panel`) as HTMLElement;
                                                let rowItem = Math.floor((parent.offsetWidth - 72) / 188);
                                                rowItem = (rowItem * 188 + 26 * (rowItem - 1) > (parent.offsetWidth - 72)) ? rowItem - 1 : rowItem;
                                                let maxwidth = (parent.offsetWidth - 72 - (rowItem - 1) * 26) / rowItem
                                                let category = vm.categories.find((category: any) => {
                                                    return category.select == true;
                                                })

                                                function arraysEqual(arr1: any[], arr2: any[]) {
                                                    if (arr1.length !== arr2.length) return false;
                                                    return arr1.every((value, index) => value === arr2[index]);
                                                }

                                                function changeSelectVariant(product: any) {
                                                    let emptyArray: any[] = [];
                                                    product.content.specs.forEach((spec: any) => {
                                                        emptyArray.push(spec.option.find((opt: any) => {
                                                            return opt.select == true;
                                                        }).title)
                                                    })
                                                    return product.content.variants.find((variant: any) => {
                                                        return arraysEqual(variant.spec, emptyArray)
                                                    })
                                                }


                                                if (vm.searchable) {
                                                    ApiShop.getProduct({
                                                        page: 0,
                                                        collection: (category.key == 'all' ? '' : category.key),
                                                        limit: 50000,
                                                        search: '',
                                                        orderBy: 'created_time_desc'
                                                    }).then(res => {
                                                        vm.searchable = false;
                                                        vm.productSearch = res.response.data;
                                                        gvc.notifyDataChange(`productShow`)
                                                    })


                                                }
                                                if (vm.productSearch.length > 0) {
                                                    return vm.productSearch.map((data) => {
                                                        let selectVariant = data.content.variants[0];
                                                        let count = 1;
                                                        data.content.specs.forEach((spec: any) => {
                                                            spec.option[0].select = true;
                                                        })

                                                        return html`
                                                            <div class="d-flex flex-column "
                                                                 style="max-width:${maxwidth}px;flex-basis: 188px;flex-grow: 1;border-radius: 10px;box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.08);"
                                                                 onclick="${gvc.event(() => {
                                                                     gvc.glitter.innerDialog((gvc) => {
                                                                         return gvc.bindView({
                                                                             bind: `productDialog`,
                                                                             view: () => {
                                                                                 return html`
                                                                                     <div class="w-100 h-100 d-flex align-items-center justify-content-center"
                                                                                          onclick="${gvc.event(() => {
                                                                                              gvc.glitter.closeDiaLog()
                                                                                          })}">
                                                                                         <div class="d-flex flex-column"
                                                                                              style="width: 542px;padding: 32px;gap:32px;background-color: white;border-radius: 10px;"
                                                                                              onclick="${gvc.event((e, event) => {
                                                                                                  event.stopPropagation();
                                                                                              })}">
                                                                                             <div class="w-100 d-flex"
                                                                                                  style="gap:24px;">
                                                                                                 <div class=""
                                                                                                      style="width: 204px;height: 204px;background: 50%/cover url('${(selectVariant.preview_image.length > 1) ? selectVariant.preview_image : data.content.preview_image[0]}');"></div>
                                                                                                 <div class="d-flex flex-column flex-fill justify-content-center">
                                                                                                     <div style="font-size: 24px;font-weight: 700;">
                                                                                                         ${data.content.title ?? "no name"}
                                                                                                     </div>
                                                                                                     <div style="font-size: 20px;font-weight: 500;margin-top: 8px;">
                                                                                                             NT.${selectVariant.sale_price}
                                                                                                     </div>
                                                                                                     ${gvc.bindView({
                                                                                                         bind: `productSpec`,
                                                                                                         view: () => {
                                                                                                             if (data.content.specs.length > 0) {
                                                                                                                 return data.content.specs.map((spec: any) => {
                                                                                                                     return html`
                                                                                                                         <div style="font-size: 16px;font-style: normal;font-weight: 500;color: #8D8D8D;">
                                                                                                                             ${spec.title}
                                                                                                                         </div>
                                                                                                                         <select class="w-100 form-select"
                                                                                                                                 style="border-radius: 5px;border: 1px solid #DDD;padding: 10px 18px;font-size: 18px;"
                                                                                                                                 onchange="${gvc.event((e) => {
                                                                                                                                     spec.option.forEach((option: any) => {
                                                                                                                                         option.select = false;
                                                                                                                                     })
                                                                                                                                     spec.option[e.value].select = true;
                                                                                                                                     selectVariant = changeSelectVariant(data);
                                                                                                                                     gvc.notifyDataChange('productDialog');
                                                                                                                                 })}">
                                                                                                                             ${(() => {
                                                                                                                                 return spec.option.map((option: any, index: number) => {
                                                                                                                                     return html`
                                                                                                                                         <option class="d-flex align-items-center justify-content-center"
                                                                                                                                                 value="${index}"
                                                                                                                                                 ${(option.select) ? 'selected' : ''}
                                                                                                                                                 style="border-radius: 5px;padding: 10px 18px;color: #393939;font-size: 18px;font-weight: 500;letter-spacing: 0.72px;"
                                                                                                                                                 onclick="${gvc.event(() => {
                                                                                                                                                 })}">
                                                                                                                                             ${option.title}
                                                                                                                                         </option>`
                                                                                                                                 }).join('');
                                                                                                                             })()}
                                                                                                                         </select>
                                                                                                                     `
                                                                                                                 }).join('')
                                                                                                             } else {
                                                                                                                 return ``
                                                                                                             }
                                                                                                         },
                                                                                                         divCreate: {
                                                                                                             style: `gap:8px;margin-bottom:24px;margin-top:16px;`,
                                                                                                             class: `d-flex flex-column`
                                                                                                         }
                                                                                                     })}
                                                                                                     <div class="d-flex align-items-center justify-content-between"
                                                                                                          style="gap: 10px;padding: 10px 18px;border-radius: 5px;border: 1px solid #DDD;">
                                                                                                         <div class="d-flex align-items-center justify-content-center"
                                                                                                              style="border-radius: 10px;cursor: pointer;"
                                                                                                              onclick="${gvc.event(() => {
                                                                                                                  count = (count == 1) ? count : count - 1;
                                                                                                                  gvc.notifyDataChange(`productDialog`);
                                                                                                              })}">
                                                                                                             <svg xmlns="http://www.w3.org/2000/svg"
                                                                                                                  width="13"
                                                                                                                  height="3"
                                                                                                                  viewBox="0 0 13 3"
                                                                                                                  fill="none">
                                                                                                                 <path d="M13 1.5C13 1.98398 12.5531 2.375 12 2.375H1C0.446875 2.375 0 1.98398 0 1.5C0 1.01602 0.446875 0.625 1 0.625H12C12.5531 0.625 13 1.01602 13 1.5Z"
                                                                                                                       fill="#393939"/>
                                                                                                             </svg>
                                                                                                         </div>
                                                                                                         <input class="border-0 qty"
                                                                                                                style="text-align: center;width: 30px;"
                                                                                                                value="${count}"
                                                                                                                onchange="${gvc.event((e) => {
                                                                                                                    count = e.value;
                                                                                                                    gvc.notifyDataChange(`productDialog`);
                                                                                                                })}">
                                                                                                         <div class="d-flex align-items-center justify-content-center"
                                                                                                              style="border-radius: 10px;cursor: pointer;"
                                                                                                              onclick="${gvc.event(() => {
                                                                                                                  count++
                                                                                                                  gvc.notifyDataChange(`productDialog`);
                                                                                                              })}">
                                                                                                             <svg xmlns="http://www.w3.org/2000/svg"
                                                                                                                  width="14"
                                                                                                                  height="15"
                                                                                                                  viewBox="0 0 14 15"
                                                                                                                  fill="none">
                                                                                                                 <path d="M8.07692 1.57692C8.07692 0.98125 7.59567 0.5 7 0.5C6.40433 0.5 5.92308 0.98125 5.92308 1.57692V6.42308H1.07692C0.48125 6.42308 0 6.90433 0 7.5C0 8.09567 0.48125 8.57692 1.07692 8.57692H5.92308V13.4231C5.92308 14.0188 6.40433 14.5 7 14.5C7.59567 14.5 8.07692 14.0188 8.07692 13.4231V8.57692H12.9231C13.5188 8.57692 14 8.09567 14 7.5C14 6.90433 13.5188 6.42308 12.9231 6.42308H8.07692V1.57692Z"
                                                                                                                       fill="#393939"/>
                                                                                                             </svg>
                                                                                                         </div>
                                                                                                     </div>
                                                                                                 </div>
                                                                                             </div>
                                                                                             <div class="d-flex align-items-center justify-content-center"
                                                                                                  style="padding: 12px 24px;font-size: 20px;color: #FFF;font-weight: 500;border-radius: 10px;background: #393939;"
                                                                                                  onclick="${gvc.event(() => {

                                                                                                      let addItem = orderDetail.lineItems.find((item: any) => {
                                                                                                          console.log(data)
                                                                                                          console.log(item)
                                                                                                          console.log(selectVariant)
                                                                                                          return data.content.title == item.title && arraysEqual(item.spec, selectVariant.spec)
                                                                                                      });
                                                                                                      if (addItem) {
                                                                                                          addItem.count++;
                                                                                                      } else {
                                                                                                          console.log()
                                                                                                          orderDetail.lineItems.push({
                                                                                                              id: data.id,
                                                                                                              title: data.content.title,
                                                                                                              preview_image: (selectVariant.preview_image.length > 1) ? selectVariant.preview_image : data.content.preview_image[0],
                                                                                                              spec: selectVariant.spec,
                                                                                                              count: count,
                                                                                                              sale_price: selectVariant.sale_price,
                                                                                                              sku: selectVariant.sku
                                                                                                          })
                                                                                                      }

                                                                                                      gvc.glitter.closeDiaLog()
                                                                                                  })}">
                                                                                                 加入購物車
                                                                                             </div>
                                                                                         </div>
                                                                                     </div>`
                                                                             }, divCreate: {class: `w-100 h-100 `}
                                                                         })
                                                                     }, 'product', {
                                                                         dismiss: () => {
                                                                             gvc.notifyDataChange('order')
                                                                         }
                                                                     })
                                                                 })}">
                                                                <div class="w-100"
                                                                     style="border-radius: 10px 10px 0 0;;padding-bottom: 116px;background: 50%/cover no-repeat url('${data.content.preview_image[0] ?? image ?? image}');"></div>
                                                                <div class="d-flex flex-column"
                                                                     style="padding: 12px 10px;gap: 4px;">
                                                                    <div style="font-size: 18px;width: 100%;overflow: hidden;display: -webkit-box;-webkit-line-clamp: 2;text-overflow: ellipsis;word-break: break-word;-webkit-box-orient: vertical;">
                                                                        ${data.content.title ?? "no name"}
                                                                    </div>
                                                                    <div class="w-100 align-items-center justify-content-end"
                                                                         style="font-size: 16px;font-weight: 700;text-align: right;">
                                                                            NT.${data.content.min_price ?? 0}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        `
                                                    }).join('')
                                                }
                                                return html``
                                            },
                                            divCreate: {
                                                class: `d-flex flex-wrap w-100 product-show`,
                                                style: `gap:26px;overflow:scroll;max-height:100%;`
                                            }
                                        })}
                                    </div>
                                    <div class=""
                                         style="height: 100%;width: 352px;overflow: auto;padding: 36px 24px;background: #FFF;box-shadow: 1px 0 10px 0 rgba(0, 0, 0, 0.10);">
                                        <div style="color:#393939;font-size: 32px;font-weight: 700;letter-spacing: 3px;margin-bottom: 32px;">
                                            購物車
                                        </div>
                                        ${gvc.bindView({
                                            bind: 'order',
                                            dataList: [{obj: vm, key: 'order'}],
                                            view: () => {
                                                orderDetail.subtotal = 0;
                                                orderDetail.lineItems.forEach((item) => {
                                                    orderDetail.subtotal += item.sale_price * item.count;
                                                })

                                                return html`
                                                    <div style="display: flex;flex-direction: column;gap: 18px;">
                                                        ${orderDetail.lineItems.map((item, index) => {
                                                            return html`
                                                                ${(index > 0) ? `<div style="background-color: #DDD;height:1px;width: 100%;"></div>` : ""}
                                                                <div class="d-flex align-items-center"
                                                                     style="height: 87px;">
                                                                    <div style="background: 50%/cover url('${item.preview_image}');height: 67px;width: 66px;margin-right: 12px;"></div>
                                                                    <div class="d-flex flex-column flex-fill">
                                                                        <div>${item.title}</div>
                                                                        <div class="d-flex" style="gap:4px;">
                                                                            ${(item.spec.length > 0) ? item.spec.map((spec) => {
                                                                                return html`
                                                                                    <div style="color: #949494;font-size: 16px;font-style: normal;font-weight: 500;">
                                                                                        ${spec}
                                                                                    </div>`
                                                                            }).join('') : "單一規格"}
                                                                        </div>
                                                                        <div class="d-flex align-items-center"
                                                                             style="margin-top:6px;">
                                                                            <div style="display: flex;width: 30px;height: 30px;padding: 8px;justify-content: center;align-items: center;border-radius: 10px;background: #393939;"
                                                                                 onclick="${gvc.event(() => {
                                                                                     item.count = (item.count < 2) ? item.count : item.count - 1;
                                                                                     gvc.notifyDataChange('order')
                                                                                 })}">
                                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                                     width="10" height="10"
                                                                                     viewBox="0 0 10 10" fill="none">
                                                                                    <path d="M9.64314 5C9.64314 5.3457 9.32394 5.625 8.92885 5.625H1.07171C0.676618 5.625 0.357422 5.3457 0.357422 5C0.357422 4.6543 0.676618 4.375 1.07171 4.375H8.92885C9.32394 4.375 9.64314 4.6543 9.64314 5Z"
                                                                                          fill="white"/>
                                                                                </svg>
                                                                            </div>
                                                                            <input class="border-0"
                                                                                   style="width: 50px;height: 25px;color: #393939;font-size: 18px;font-weight: 500;text-align: center"
                                                                                   value="${item.count}">
                                                                            <div style="display: flex;width: 30px;height: 30px;padding: 8px;justify-content: center;align-items: center;border-radius: 10px;background: #393939;"
                                                                                 onclick="${gvc.event(() => {
                                                                                     item.count++
                                                                                     gvc.notifyDataChange('order')
                                                                                 })}">
                                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                                     width="10" height="10"
                                                                                     viewBox="0 0 10 10" fill="none"
                                                                                     onclick="${gvc.event(() => {
                                                                                         console.log("test")
                                                                                     })}">
                                                                                    <path d="M5.76923 0.769231C5.76923 0.34375 5.42548 0 5 0C4.57452 0 4.23077 0.34375 4.23077 0.769231V4.23077H0.769231C0.34375 4.23077 0 4.57452 0 5C0 5.42548 0.34375 5.76923 0.769231 5.76923H4.23077V9.23077C4.23077 9.65625 4.57452 10 5 10C5.42548 10 5.76923 9.65625 5.76923 9.23077V5.76923H9.23077C9.65625 5.76923 10 5.42548 10 5C10 4.57452 9.65625 4.23077 9.23077 4.23077H5.76923V0.769231Z"
                                                                                          fill="white"/>
                                                                                </svg>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                    <div class="h-100 d-flex flex-column align-items-end justify-content-between">
                                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                                             width="14" height="14" viewBox="0 0 14 14"
                                                                             fill="none">
                                                                            <path d="M1 1L13 13" stroke="#949494"
                                                                                  stroke-width="2"
                                                                                  stroke-linecap="round"/>
                                                                            <path d="M13 1L1 13" stroke="#949494"
                                                                                  stroke-width="2"
                                                                                  stroke-linecap="round"/>
                                                                        </svg>
                                                                        <div style="color:#393939;font-size: 18px;font-style: normal;font-weight: 500;letter-spacing: 0.72px;">
                                                                                NT.${item.sale_price * item.count}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            `
                                                        }).join('')}
                                                    </div>
                                                    <div class="w-100"
                                                         style="margin-top: 24px;border-radius: 10px;border: 1px solid #DDD;background: #FFF;display: flex;padding: 24px;flex-direction: column;justify-content: center;">
                                                        <div class=" w-100 d-flex flex-column" style="gap:6px;">
                                                            ${(() => {
                                                                let tempData = [
                                                                    {
                                                                        left: `小計總額`,
                                                                        right: orderDetail.subtotal ?? 0
                                                                    },
                                                                    {left: `活動折扣`, right: orderDetail.discount ?? 0}
                                                                ]
                                                                return tempData.map((data) => {
                                                                    return html`
                                                                        <div class="w-100 d-flex">
                                                                            <div style="font-size: 16px;font-style: normal;font-weight: 500;">
                                                                                ${data.left}
                                                                            </div>
                                                                            <div class="ms-auto"
                                                                                 style="font-size: 16px;font-weight: 700;">
                                                                                ${data.right}
                                                                            </div>
                                                                        </div>
                                                                    `
                                                                }).join(``)
                                                            })()}
                                                        </div>
                                                        <div class="d-flex align-items-center justify-content-center"
                                                             style="margin:18px 0;">
                                                            <svg width="350" height="2" viewBox="0 0 350 2" fill="none"
                                                                 xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M0 1H350" stroke="#DDDDDD"
                                                                      stroke-dasharray="8 8"/>
                                                            </svg>
                                                        </div>
                                                        <div class="d-flex"
                                                             style="font-size: 18px;color: #393939;font-weight: 700;">
                                                            <div class="" style="">總金額</div>
                                                            <div class="ms-auto">${orderDetail.total}</div>
                                                        </div>

                                                    </div>
                                                `
                                            }, divCreate: {class: `display: flex;flex-direction: column;gap: 24px;`}
                                        })}

                                        <div style="margin-top: 32px;display: flex;padding: 12px 24px;justify-content: center;align-items: center;border-radius: 10px;background: #393939;font-size: 20px;font-style: normal;font-weight: 500;color: #FFF;"
                                             onclick="${gvc.event(() => {
                                                 vm.type = 'payment';
                                             })}">
                                            送出訂單
                                        </div>
                                    </div>
                                `
                            }, divCreate: {class: `h-100 d-flex w-100`, style: `background: #F7F7F7;`}
                        })}
                    `
                },
                divCreate: {style: `padding: 86px 0 0 103px;height:100vh;width:100vw;color:#393939;`}

            };
        });
    }

}

(window as any).glitter.setModule(import.meta.url, POSSetting);
